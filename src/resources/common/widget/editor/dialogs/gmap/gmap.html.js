define(function(require, exports, module) {
    module.exports="<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"\n \"http://www.w3.org/TR/html4/loose.dtd\">\n<html>\n<head>\n <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n <title></title>\n <script type=\"text/javascript\" src=\"../internal.js\"></script>\n <style type=\"text/css\">\n .content{width:530px; height: 350px;margin: 10px auto;}\n .content table{width: 100%}\n .content table td{vertical-align: middle;}\n #address{width:220px;height:21px;background: #FFF;border:1px solid #d7d7d7; line-height: 21px;}\n </style>\n <script type=\"text/javascript\" src=\"http://maps.googleapis.com/maps/api/js?sensor=false\"></script>\n</head>\n<body>\n<div class=\"content\">\n <table>\n <tr>\n <td><label for=\"address\"><var id=\"lang_input_address\"></var></label></td>\n <td><input id=\"address\" type=\"text\" /></td>\n <td><a id=\"doSearch\" href=\"javascript:void(0)\" class=\"button\"><var id=\"lang_input_search\"></var></a></td>\n </tr>\n </table>\n <div id=\"container\" style=\"width: 100%; height: 340px;margin: 5px auto; border: 1px solid gray;\"></div>\n</div>\n<script type=\"text/javascript\">\n domUtils.on(window,\"load\",function(){\n var map = new google.maps.Map(document.getElementById('container'), {\n zoom: 3,\n streetViewControl: false,\n scaleControl: true,\n mapTypeId: google.maps.MapTypeId.ROADMAP\n });\n var imgcss;\n var marker = new google.maps.Marker({\n map: map,\n draggable: true\n });\n function doSearch(){\n var address = document.getElementById('address').value;\n var geocoder = new google.maps.Geocoder();\n geocoder.geocode( { 'address': address}, function (results, status) {\n if (status == google.maps.GeocoderStatus.OK) {\n var bounds = results[0].geometry.viewport;\n map.fitBounds(bounds);\n marker.setPosition(results[0].geometry.location);\n marker.setTitle(address);\n } else alert(lang.searchError);\n });\n }\n $G('address').onkeydown = function (evt){\n evt = evt || event;\n if (evt.keyCode == 13) {\n doSearch();\n }\n };\n $G(\"doSearch\").onclick = doSearch;\n dialog.onok = function (){\n var center = map.getCenter();\n var point = marker.getPosition();\n var url = \"http://maps.googleapis.com/maps/api/staticmap?center=\" + center.lat() + ',' + center.lng() + \"&zoom=\" + map.zoom + \"&size=520x340&maptype=\" + map.getMapTypeId() + \"&markers=\" + point.lat() + ',' + point.lng() + \"&sensor=false\";\n editor.execCommand('inserthtml', '<img width=\"520\" height=\"340\" src=\"' + url + '\"' + (imgcss ? ' style=\"' + imgcss + '\"' :'') + '/>');\n };\n\n function getPars(str,par){\n var reg = new RegExp(par+\"=((\\\\d+|[.,])*)\",\"g\");\n return reg.exec(str)[1];\n }\n var img = editor.selection.getRange().getClosedNode();\n if(img && img.src.indexOf(\"http://maps.googleapis.com/maps/api/staticmap\")!=-1){\n var url = img.getAttribute(\"src\");\n var centers = getPars(url,\"center\").split(\",\");\n point = new google.maps.LatLng(Number(centers[0]),Number(centers[1]));\n map.setCenter(point);\n map.setZoom(Number(getPars(url,\"zoom\")));\n centers = getPars(url,\"markers\").split(\",\");\n marker.setPosition(new google.maps.LatLng(Number(centers[0]),Number(centers[1])));\n imgcss = img.style.cssText;\n }else{\n setTimeout(function(){\n doSearch();\n },30)\n }\n });\n\n</script>\n</body>\n</html>";
});