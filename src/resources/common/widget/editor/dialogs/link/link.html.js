define(function(require, exports, module) {
    module.exports="<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"\n \"http://www.w3.org/TR/html4/loose.dtd\">\n<html>\n<head>\n <title></title>\n <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\n <script type=\"text/javascript\" src=\"../internal.js\"></script>\n <style type=\"text/css\">\n *{margin:0;padding:0;color: #838383;}\n table{font-size: 12px;margin: 10px;line-height: 30px}\n .txt{width:300px;height:21px;line-height:21px;border:1px solid #d7d7d7;}\n </style>\n</head>\n<body>\n <table>\n <tr>\n <td><label for=\"text\"> <var id=\"lang_input_text\"></var></label></td>\n <td><input class=\"txt\" id=\"text\" type=\"text\" disabled=\"true\"/></td>\n </tr>\n <tr>\n <td><label for=\"href\"> <var id=\"lang_input_url\"></var></label></td>\n <td><input class=\"txt\" id=\"href\" type=\"text\" /></td>\n </tr>\n <tr>\n <td><label for=\"title\"> <var id=\"lang_input_title\"></var></label></td>\n <td><input class=\"txt\" id=\"title\" type=\"text\"/></td>\n </tr>\n <tr>\n <td colspan=\"2\">\n <label for=\"target\"><var id=\"lang_input_target\"></var></label>\n <input id=\"target\" type=\"checkbox\"/>\n </td>\n </tr>\n <tr>\n <td colspan=\"2\" id=\"msg\"></td>\n </tr>\n </table>\n<script type=\"text/javascript\">\n var range = editor.selection.getRange(),\n link = range.collapsed ? editor.queryCommandValue( \"link\" ) : editor.selection.getStart(),\n url,\n text = $G('text'),\n rangeLink = domUtils.findParentByTagName(range.getCommonAncestor(),'a',true),\n orgText;\n link = domUtils.findParentByTagName( link, \"a\", true );\n if(link){\n url = utils.html(link.getAttribute( '_href' ) || link.getAttribute( 'href', 2 ));\n\n if(rangeLink === link && !link.getElementsByTagName('img').length){\n text.removeAttribute('disabled');\n orgText = text.value = link[browser.ie ? 'innerText':'textContent'];\n }else{\n text.setAttribute('disabled','true');\n text.value = lang.validLink;\n }\n\n }else{\n if(range.collapsed){\n text.removeAttribute('disabled');\n text.value = '';\n }else{\n text.setAttribute('disabled','true');\n text.value = lang.validLink;\n }\n\n }\n $G(\"title\").value = url ? link.title : \"\";\n $G(\"href\").value = url ? url: '';\n $G(\"target\").checked = url && link.target == \"_blank\" ? true : false;\n $focus($G(\"href\"));\n\n function handleDialogOk(){\n var href =$G('href').value.replace(/^\\s+|\\s+$/g, '');\n if(href){\n if(!hrefStartWith(href,[\"http\",\"/\",\"ftp://\",'#'])) {\n href = \"http://\" + href;\n }\n var obj = {\n 'href' : href,\n 'target' : $G(\"target\").checked ? \"_blank\" : '_self',\n 'title' : $G(\"title\").value.replace(/^\\s+|\\s+$/g, ''),\n '_href':href\n };\n //修改链接内容的情况太特殊了，所以先做到这里了\n //todo:情况多的时候，做到command里\n if(orgText && text.value != orgText){\n link[browser.ie ? 'innerText' : 'textContent'] = obj.textValue = text.value;\n range.selectNode(link).select()\n }\n if(range.collapsed){\n obj.textValue = text.value;\n }\n editor.execCommand('link',utils.clearEmptyAttrs(obj) );\n dialog.close();\n }\n }\n dialog.onok = handleDialogOk;\n $G('href').onkeydown = $G('title').onkeydown = function(evt){\n evt = evt || window.event;\n if (evt.keyCode == 13) {\n handleDialogOk();\n return false;\n }\n };\n $G('href').onblur = function(){\n if(!hrefStartWith(this.value,[\"http\",\"/\",\"ftp://\",'#'])){\n $G(\"msg\").innerHTML = \"<span style='color: red'>\"+lang.httpPrompt+\"</span>\";\n }else{\n $G(\"msg\").innerHTML = \"\";\n }\n };\n\n function hrefStartWith(href,arr){\n href = href.replace(/^\\s+|\\s+$/g, '');\n for(var i=0,ai;ai=arr[i++];){\n if(href.indexOf(ai)==0){\n return true;\n }\n }\n return false;\n }\n\n\n</script>\n</body>\n</html>\n";
});