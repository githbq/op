define(function(require, exports, module) {
    module.exports="<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"\r\n \"http://www.w3.org/TR/html4/loose.dtd\">\r\n<html>\r\n<head>\r\n <title></title>\r\n <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"/>\r\n <script type=\"text/javascript\" src=\"../internal.js\"></script>\r\n <style type=\"text/css\">\r\n *{margin:0;padding:0;color: #838383;}\r\n table{font-size: 12px;margin: 10px;line-height: 30px}\r\n .txt{width:300px;height:21px;line-height:21px;border:1px solid #d7d7d7;}\r\n </style>\r\n</head>\r\n<body>\r\n <table>\r\n <tr>\r\n <td><label for=\"text\"> <var id=\"lang_input_text\"></var></label></td>\r\n <td><input class=\"txt\" id=\"text\" type=\"text\" disabled=\"true\"/></td>\r\n </tr>\r\n <tr>\r\n <td><label for=\"href\"> <var id=\"lang_input_url\"></var></label></td>\r\n <td><input class=\"txt\" id=\"href\" type=\"text\" /></td>\r\n </tr>\r\n <tr>\r\n <td><label for=\"title\"> <var id=\"lang_input_title\"></var></label></td>\r\n <td><input class=\"txt\" id=\"title\" type=\"text\"/></td>\r\n </tr>\r\n <tr>\r\n <td colspan=\"2\">\r\n <label for=\"target\"><var id=\"lang_input_target\"></var></label>\r\n <input id=\"target\" type=\"checkbox\"/>\r\n </td>\r\n </tr>\r\n <tr>\r\n <td colspan=\"2\" id=\"msg\"></td>\r\n </tr>\r\n </table>\r\n<script type=\"text/javascript\">\r\n var range = editor.selection.getRange(),\r\n link = range.collapsed ? editor.queryCommandValue( \"link\" ) : editor.selection.getStart(),\r\n url,\r\n text = $G('text'),\r\n rangeLink = domUtils.findParentByTagName(range.getCommonAncestor(),'a',true),\r\n orgText;\r\n link = domUtils.findParentByTagName( link, \"a\", true );\r\n if(link){\r\n url = utils.html(link.getAttribute( '_href' ) || link.getAttribute( 'href', 2 ));\r\n\r\n if(rangeLink === link && !link.getElementsByTagName('img').length){\r\n text.removeAttribute('disabled');\r\n orgText = text.value = link[browser.ie ? 'innerText':'textContent'];\r\n }else{\r\n text.setAttribute('disabled','true');\r\n text.value = lang.validLink;\r\n }\r\n\r\n }else{\r\n if(range.collapsed){\r\n text.removeAttribute('disabled');\r\n text.value = '';\r\n }else{\r\n text.setAttribute('disabled','true');\r\n text.value = lang.validLink;\r\n }\r\n\r\n }\r\n $G(\"title\").value = url ? link.title : \"\";\r\n $G(\"href\").value = url ? url: '';\r\n $G(\"target\").checked = url && link.target == \"_blank\" ? true : false;\r\n $focus($G(\"href\"));\r\n\r\n function handleDialogOk(){\r\n var href =$G('href').value.replace(/^\\s+|\\s+$/g, '');\r\n if(href){\r\n if(!hrefStartWith(href,[\"http\",\"/\",\"ftp://\",'#'])) {\r\n href = \"http://\" + href;\r\n }\r\n var obj = {\r\n 'href' : href,\r\n 'target' : $G(\"target\").checked ? \"_blank\" : '_self',\r\n 'title' : $G(\"title\").value.replace(/^\\s+|\\s+$/g, ''),\r\n '_href':href\r\n };\r\n //修改链接内容的情况太特殊了，所以先做到这里了\r\n //todo:情况多的时候，做到command里\r\n if(orgText && text.value != orgText){\r\n link[browser.ie ? 'innerText' : 'textContent'] = obj.textValue = text.value;\r\n range.selectNode(link).select()\r\n }\r\n if(range.collapsed){\r\n obj.textValue = text.value;\r\n }\r\n editor.execCommand('link',utils.clearEmptyAttrs(obj) );\r\n dialog.close();\r\n }\r\n }\r\n dialog.onok = handleDialogOk;\r\n $G('href').onkeydown = $G('title').onkeydown = function(evt){\r\n evt = evt || window.event;\r\n if (evt.keyCode == 13) {\r\n handleDialogOk();\r\n return false;\r\n }\r\n };\r\n $G('href').onblur = function(){\r\n if(!hrefStartWith(this.value,[\"http\",\"/\",\"ftp://\",'#'])){\r\n $G(\"msg\").innerHTML = \"<span style='color: red'>\"+lang.httpPrompt+\"</span>\";\r\n }else{\r\n $G(\"msg\").innerHTML = \"\";\r\n }\r\n };\r\n\r\n function hrefStartWith(href,arr){\r\n href = href.replace(/^\\s+|\\s+$/g, '');\r\n for(var i=0,ai;ai=arr[i++];){\r\n if(href.indexOf(ai)==0){\r\n return true;\r\n }\r\n }\r\n return false;\r\n }\r\n\r\n\r\n</script>\r\n</body>\r\n</html>\r\n";
});